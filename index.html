<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Values-Based Decision Making Under Pressure</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: radial-gradient(ellipse at top, #0f0515 0%, #1a0a1a 30%, #2d1b2e 70%, #0f0515 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 15% 25%, rgba(139, 69, 19, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 85% 75%, rgba(75, 0, 130, 0.12) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header-section {
            background: rgba(139, 69, 19, 0.08);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid rgba(139, 69, 19, 0.15);
            padding: 40px;
            text-align: center;
            position: relative;
        }

        .main-title {
            font-size: clamp(28px, 5vw, 42px);
            font-weight: 600;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #ffffff, #e8d5b7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.5px;
        }

        .main-subtitle {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.75);
            max-width: 700px;
            margin: 0 auto;
            font-weight: 300;
        }

        .tab-navigation {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(15px);
            padding: 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: center;
            overflow-x: auto;
        }

        .tab-item {
            padding: 20px 30px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            white-space: nowrap;
            position: relative;
            background: rgba(255, 255, 255, 0.02);
            color: rgba(255, 255, 255, 0.6);
        }

        .tab-item:hover {
            background: rgba(255, 255, 255, 0.04);
            color: rgba(255, 255, 255, 0.8);
        }

        .tab-item.active {
            color: #ffffff;
            border-bottom-color: #e8d5b7;
            background: rgba(255, 255, 255, 0.06);
        }

        .tab-item.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .tab-item.intro.active {
            border-bottom-color: #ffc107;
            background: rgba(255, 193, 7, 0.1);
        }

        .tab-item.scenario1.active {
            border-bottom-color: #e74c3c;
            background: rgba(231, 76, 60, 0.1);
        }

        .status-bar {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(15px);
            padding: 15px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .status-indicators {
            display: flex;
            gap: 25px;
            align-items: center;
        }

        .status-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-value {
            font-size: 20px;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .pressure-meter {
            width: 180px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .pressure-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #f39c12, #e74c3c);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 20px;
        }

        .main-content {
            flex: 1;
            display: grid;
            grid-template-columns: 320px 1fr;
            min-height: calc(100vh - 200px);
        }

        .sidebar {
            background: rgba(139, 69, 19, 0.06);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(139, 69, 19, 0.1);
            padding: 25px;
            overflow-y: auto;
        }

        .sidebar-section {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
        }

        .sidebar-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, rgba(139, 69, 19, 0.6), rgba(160, 82, 45, 0.4));
            border-radius: 0 3px 3px 0;
        }

        .sidebar-title {
            font-size: 14px;
            font-weight: 600;
            color: #e8d5b7;
            margin-bottom: 12px;
            letter-spacing: 0.5px;
        }

        .sidebar-content {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
        }

        .coaching-prompt {
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid rgba(46, 204, 113, 0.2);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.9);
            border-left: 4px solid #2ecc71;
            animation: glow-coaching 3s infinite;
        }

        @keyframes glow-coaching {
            0%, 100% { box-shadow: 0 0 10px rgba(46, 204, 113, 0.2); }
            50% { box-shadow: 0 0 20px rgba(46, 204, 113, 0.4); }
        }

        .main-panel {
            padding: 30px;
            overflow-y: auto;
            position: relative;
        }

        .tab-content {
            display: none;
            animation: fadeInUp 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInUp {
            from { 
                opacity: 0; 
                transform: translateY(20px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        .intro-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .intro-hero {
            background: rgba(255, 193, 7, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 193, 7, 0.2);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .intro-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #ffc107, #f39c12, #ffc107);
        }

        .step-indicator {
            background: rgba(255, 193, 7, 0.2);
            color: #ffc107;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .intro-title {
            font-size: 28px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 20px;
        }

        .intro-description {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.7;
            margin-bottom: 30px;
        }

        .completion-indicator {
            background: rgba(46, 204, 113, 0.15);
            border: 1px solid rgba(46, 204, 113, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
            display: none;
        }

        .completion-indicator.show {
            display: block;
            animation: completion-appear 0.5s ease-out;
        }

        @keyframes completion-appear {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .key-concepts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .concept-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #8b4513, #a0522d);
        }

        .concept-icon {
            font-size: 32px;
            margin-bottom: 15px;
            display: block;
        }

        .concept-title {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .concept-desc {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.5;
        }

        .scenario-content {
            position: relative;
            border-left: 4px solid #e74c3c;
        }

        .scenario-intro-card {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 30px;
            position: relative;
        }

        .scenario-intro-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, #e74c3c, #c0392b, #e74c3c);
        }

        .scenario-title {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .scenario-icon {
            font-size: 28px;
            margin-right: 15px;
        }

        .scenario-description {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .scenario-stats {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 25px;
        }

        .decision-phase {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(231, 76, 60, 0.15);
            border-radius: 20px;
            margin-bottom: 25px;
            overflow: hidden;
            position: relative;
            display: none;
        }

        .decision-phase.active {
            display: block;
            animation: phase-enter 0.8s cubic-bezier(0.23, 1, 0.32, 1);
        }

        @keyframes phase-enter {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1);
            }
        }

        .phase-header {
            padding: 25px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            background: linear-gradient(135deg, rgba(231, 76, 60, 0.15), rgba(192, 57, 43, 0.1));
        }

        .phase-title-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .phase-title {
            font-size: 20px;
            font-weight: 600;
            color: #ffffff;
        }

        .phase-timer {
            background: rgba(231, 76, 60, 0.2);
            color: #ff6b6b;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            border: 1px solid rgba(231, 76, 60, 0.3);
            min-width: 70px;
            text-align: center;
        }

        .phase-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            line-height: 1.5;
        }

        .phase-content {
            padding: 25px 30px;
        }

        .coaching-prompts {
            background: rgba(46, 204, 113, 0.08);
            border: 1px solid rgba(46, 204, 113, 0.15);
            border-radius: 14px;
            padding: 18px;
            margin-bottom: 20px;
            position: relative;
        }

        .coaching-prompts::before {
            content: '💡';
            position: absolute;
            top: -10px;
            left: 18px;
            background: rgba(46, 204, 113, 0.2);
            padding: 4px 10px;
            border-radius: 16px;
            font-size: 14px;
        }

        .prompt-title {
            font-weight: 600;
            color: #2ecc71;
            margin-bottom: 12px;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .prompt-list {
            list-style: none;
            padding: 0;
        }

        .prompt-list li {
            color: rgba(255, 255, 255, 0.85);
            margin-bottom: 6px;
            font-size: 13px;
            padding-left: 16px;
            position: relative;
        }

        .prompt-list li::before {
            content: '▸';
            position: absolute;
            left: 0;
            color: #2ecc71;
            font-weight: bold;
        }

        .decision-input {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            padding: 18px;
            margin-bottom: 18px;
        }

        .input-label {
            font-size: 13px;
            font-weight: 500;
            color: #e8d5b7;
            margin-bottom: 10px;
            display: block;
        }

        .decision-textarea {
            width: 100%;
            min-height: 70px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px;
            color: #ffffff;
            font-size: 13px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .decision-textarea:focus {
            outline: none;
            border-color: rgba(139, 69, 19, 0.5);
            box-shadow: 0 0 20px rgba(139, 69, 19, 0.2);
        }

        .decision-textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .values-checklist {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .values-item {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            text-align: center;
        }

        .values-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .values-item:hover::before,
        .values-item.selected::before {
            transform: scaleX(1);
        }

        .values-item:hover,
        .values-item.selected {
            background: rgba(46, 204, 113, 0.1);
            border-color: rgba(46, 204, 113, 0.3);
            transform: translateY(-2px);
        }

        .values-name {
            font-weight: 500;
            color: #ffffff;
            font-size: 13px;
            margin-bottom: 4px;
        }

        .values-desc {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
        }

        .timer-display {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(231, 76, 60, 0.3);
            border-radius: 50%;
            width: 100px;
            height: 100px;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(231, 76, 60, 0.4);
        }

        .timer-display.active {
            display: flex;
            animation: timer-entrance 0.5s ease-out;
        }

        @keyframes timer-entrance {
            from { 
                opacity: 0; 
                transform: translateY(-50%) scale(0.8);
            }
            to { 
                opacity: 1; 
                transform: translateY(-50%) scale(1);
            }
        }

        .timer-value {
            font-size: 28px;
            font-weight: 700;
            color: #ffffff;
            line-height: 1;
        }

        .timer-label {
            font-size: 9px;
            color: rgba(255, 255, 255, 0.7);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 2px;
        }

        .timer-ring {
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 50%;
            background: conic-gradient(#e74c3c 0%, #e74c3c var(--progress, 0%), rgba(255,255,255,0.1) var(--progress, 0%));
        }

        .phase-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            font-size: 13px;
            transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            transition: width 0.4s ease, height 0.4s ease;
            transform: translate(-50%, -50%);
        }

        .btn:hover::before {
            width: 180px;
            height: 180px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 35px rgba(46, 204, 113, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.12);
            color: #ffffff;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
        }

        .results-panel {
            background: rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 35px;
            margin-top: 25px;
            display: none;
        }

        .results-panel.show {
            display: block;
            animation: results-enter 1s cubic-bezier(0.23, 1, 0.32, 1);
        }

        @keyframes results-enter {
            from { 
                opacity: 0; 
                transform: translateY(30px);
            }
            to { 
                opacity: 1; 
                transform: translateY(0);
            }
        }

        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .results-title {
            font-size: 24px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 10px;
        }

        .results-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .scores-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .score-card {
            background: rgba(255, 255, 255, 0.06);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .score-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 6px;
        }

        .score-label {
            font-size: 11px;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .score-excellent {
            color: #2ecc71;
            border-left: 3px solid #2ecc71;
        }

        .score-good {
            color: #f39c12;
            border-left: 3px solid #f39c12;
        }

        .score-needs-improvement {
            color: #e74c3c;
            border-left: 3px solid #e74c3c;
        }

        .feedback-section {
            background: rgba(46, 204, 113, 0.08);
            border: 1px solid rgba(46, 204, 113, 0.15);
            border-radius: 14px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .feedback-title {
            font-size: 16px;
            font-weight: 600;
            color: #2ecc71;
            margin-bottom: 12px;
        }

        .feedback-content {
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.6;
            font-size: 14px;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: 2;
                border-right: none;
                border-top: 1px solid rgba(139, 69, 19, 0.1);
            }
            
            .timer-display {
                width: 80px;
                height: 80px;
                top: 20px;
                right: 20px;
            }
            
            .timer-value {
                font-size: 22px;
            }
        }

        @media (max-width: 768px) {
            .scores-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header-section">
            <h1 class="main-title">Values-Based Decision Making Under Pressure</h1>
            <p class="main-subtitle">Navigate high-stakes leadership challenges while maintaining ethical alignment and systems awareness</p>
        </header>

        <nav class="tab-navigation">
            <div class="tab-item intro active" onclick="showTab('intro')" id="introTab">
                📖 Step 1: Read First
            </div>
            <div class="tab-item scenario1 disabled" onclick="showTab('scenario1')" id="scenario1Tab">
                🚨 Crisis Resource Allocation
            </div>
        </nav>

        <div class="status-bar">
            <div class="status-indicators">
                <div class="status-item">
                    <div id="valuesScore" class="status-value">--</div>
                    <div>Values Alignment</div>
                </div>
                <div class="status-item">
                    <div id="decisionQuality" class="status-value">--</div>
                    <div>Decision Quality</div>
                </div>
                <div class="status-item">
                    <div id="stakeholderImpact" class="status-value">--</div>
                    <div>Stakeholder Impact</div>
                </div>
                <div class="status-item">
                    <div id="systemsAwareness" class="status-value">--</div>
                    <div>Systems Awareness</div>
                </div>
            </div>
            <div>
                <div style="font-size: 11px; color: rgba(255,255,255,0.6); margin-bottom: 4px;">PRESSURE LEVEL</div>
                <div class="pressure-meter">
                    <div id="pressureFill" class="pressure-fill"></div>
                </div>
            </div>
        </div>

        <div class="main-content">
            <aside class="sidebar">
                <div class="sidebar-section" id="activeCoaching" style="display: none;">
                    <h3 class="sidebar-title">Live Coaching</h3>
                    <div id="coachingContent" class="sidebar-content">
                        <div class="coaching-prompt">
                            <div class="prompt-title">Active Guidance</div>
                            <div id="activePrompt">Coaching prompts will appear here during scenarios...</div>
                        </div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Decision Framework</h3>
                    <div class="sidebar-content">
                        <p style="margin-bottom: 10px; font-size: 13px;">Each scenario follows a structured approach:</p>
                        <ul style="list-style: disc; padding-left: 16px; font-size: 12px;">
                            <li><strong>Ground & Center:</strong> Identify core challenges</li>
                            <li><strong>Clarify Stakes:</strong> Define what matters most</li>
                            <li><strong>Generate Options:</strong> Create values-aligned solutions</li>
                            <li><strong>Decide & Communicate:</strong> Make and explain your choice</li>
                        </ul>
                    </div>
                </div>

                <div class="sidebar-section">
                    <h3 class="sidebar-title">Current Progress</h3>
                    <div class="sidebar-content">
                        <div style="font-size: 12px; color: rgba(255,255,255,0.7);">
                            <div id="progressIndicator">Ready to begin scenarios</div>
                            <div style="margin-top: 10px;">
                                <div style="background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px;">
                                    <div id="progressBar" style="background: linear-gradient(90deg, #2ecc71, #27ae60); height: 100%; width: 0%; border-radius: 3px; transition: width 0.5s ease;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <main class="main-panel">
                <!-- Introduction Tab -->
                <div id="intro" class="tab-content active">
                    <div class="intro-content">
                        <div class="intro-hero">
                            <div class="step-indicator">📖 Step 1: Read This First</div>
                            <h2 class="intro-title">Understanding Values-Based Leadership Under Pressure</h2>
                            <p class="intro-description">
                                This tool simulates realistic high-pressure leadership scenarios where you must make critical decisions 
                                while maintaining your core values and considering systems-wide impact. Each scenario includes timed 
                                decision phases with live coaching prompts and real-time pressure indicators.
                            </p>
                            
                            <div style="background: rgba(231, 76, 60, 0.1); border: 1px solid rgba(231, 76, 60, 0.2); border-radius: 12px; padding: 20px; margin: 25px 0;">
                                <h4 style="color: #ff6b6b; margin-bottom: 12px; font-size: 14px;">⚠️ Important: Why This Training Matters</h4>
                                <p style="color: rgba(255, 255, 255, 0.85); font-size: 13px; line-height: 1.5;">
                                    Research shows that 73% of leaders report making decisions under pressure that they later regretted because they 
                                    compromised their values or failed to consider long-term impacts. This tool builds your capacity to maintain 
                                    ethical leadership even when stakes are high and time is short.
                                </p>
                            </div>
                        </div>

                        <div class="key-concepts">
                            <div class="concept-card">
                                <span class="concept-icon">⏱️</span>
                                <div class="concept-title">Timed Decision Phases</div>
                                <div class="concept-desc">Progressive time constraints simulate real pressure with coaching support</div>
                            </div>
                            <div class="concept-card">
                                <span class="concept-icon">💡</span>
                                <div class="concept-title">Live Values Coaching</div>
                                <div class="concept-desc">Real-time guidance helps maintain ethical alignment under stress</div>
                            </div>
                            <div class="concept-card">
                                <span class="concept-icon">📊</span>
                                <div class="concept-title">Multi-Dimensional Assessment</div>
                                <div class="concept-desc">Track values, quality, stakeholder impact, and systems awareness</div>
                            </div>
                            <div class="concept-card">
                                <span class="concept-icon">🔄</span>
                                <div class="concept-title">Progressive Complexity</div>
                                <div class="concept-desc">Scenarios build in difficulty and stakeholder complexity</div>
                            </div>
                        </div>

                        <div style="background: rgba(46, 204, 113, 0.1); border: 1px solid rgba(46, 204, 113, 0.2); border-radius: 16px; padding: 25px; margin: 30px 0; text-align: center;">
                            <h4 style="color: #2ecc71; margin-bottom: 15px; font-size: 16px;">✅ Ready to Begin?</h4>
                            <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px; font-size: 14px;">
                                Once you've read this introduction, you can proceed to the scenario tabs above. 
                                Each scenario takes 5-7 minutes and includes multiple timed decision phases.
                            </p>
                            <button class="btn btn-primary" onclick="enableScenarios()" style="font-size: 14px; padding: 12px 25px;">
                                🚀 I'm Ready - Enable Scenarios
                            </button>
                        </div>

                        <div class="completion-indicator" id="completionIndicator">
                            <h4 style="color: #2ecc71; margin-bottom: 10px;">🎯 Scenarios Now Available!</h4>
                            <p style="color: rgba(255, 255, 255, 0.8); font-size: 13px;">
                                Click on the scenario tabs above to begin your values-based decision making practice.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Scenario 1: Crisis Resource Allocation -->
                <div id="scenario1" class="tab-content scenario-content">
                    <div class="scenario-intro-card">
                        <h2 class="scenario-title">
                            <span class="scenario-icon">🚨</span>
                            Crisis Resource Allocation
                        </h2>
                        <p class="scenario-description">
                            You are overseeing a multi-agency field response effort. Your team is responsible for coordinating 
                            incoming supplies and field logistics. This morning, a key shipment of medical kits failed to arrive 
                            at its destination. Some staff are frustrated, saying protocols weren't followed. Others claim the 
                            situation was unpredictable, caused by sudden changes in priorities. You need to respond quickly—but 
                            how you choose to lead may impact trust, teamwork, and the next phase of operations.
                        </p>
                        <div class="scenario-stats">
                            <span>⏱️ 4 phases • ~4 minutes total</span>
                            <span>🎯 Focus: Resource allocation and team coordination</span>
                            <span>💥 Pressure Level: High</span>
                        </div>
                        <button class="btn btn-primary" onclick="startScenarioPhases(1)" style="margin-top: 20px;">
                            Begin Decision Sequence →
                        </button>
                    </div>

                    <!-- Scenario 1 Phases -->
                    <div id="scenario1Phases" style="display: none;">
                        <div class="decision-phase" id="s1phase1">
                            <div class="phase-header">
                                <div class="phase-title-row">
                                    <h3 class="phase-title">Ground and Center</h3>
                                    <div class="phase-timer" id="s1timer1">15s</div>
                                </div>
                                <p class="phase-description">Take a moment to center yourself and identify the core challenge before reactive decision-making takes over.</p>
                            </div>
                            <div class="phase-content">
                                <div class="coaching-prompts">
                                    <div class="prompt-title">Centering Questions</div>
                                    <ul class="prompt-list">
                                        <li>What are the real consequences for community safety?</li>
                                        <li>What physical sensations of stress am I experiencing?</li>
                                        <li>Which of my leadership values are most relevant here?</li>
                                    </ul>
                                </div>
                                
                                <div class="decision-input">
                                    <label class="input-label">What is the core challenge you're facing?</label>
                                    <textarea class="decision-textarea" placeholder="Describe the primary challenge in your own words..." oninput="checkCompletion()"></textarea>
                                </div>

                                <div class="values-checklist">
                                    <div class="values-item" onclick="toggleValue(this)" data-value="integrity">
                                        <div class="values-name">Integrity</div>
                                        <div class="values-desc">Honest communication</div>
                                    </div>
                                    <div class="values-item" onclick="toggleValue(this)" data-value="safety">
                                        <div class="values-name">Safety</div>
                                        <div class="values-desc">Community well-being</div>
                                    </div>
                                    <div class="values-item" onclick="toggleValue(this)" data-value="service">
                                        <div class="values-name">Service</div>
                                        <div class="values-desc">Public good focus</div>
                                    </div>
                                    <div class="values-item" onclick="toggleValue(this)" data-value="accountability">
                                        <div class="values-name">Accountability</div>
                                        <div class="values-desc">Own decisions</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="decision-phase" id="s1phase2">
                            <div class="phase-header">
                                <div class="phase-title-row">
                                    <h3 class="phase-title">Clarify Stakes and Values</h3>
                                    <div class="phase-timer" id="s1timer2">60s</div>
                                </div>
                                <p class="phase-description">Identify what's truly at stake and ensure your decision addresses actual rather than perceived urgency.</p>
                            </div>
                            <div class="phase-content">
                                <div class="coaching-prompts">
                                    <div class="prompt-title">Values Clarification</div>
                                    <ul class="prompt-list">
                                        <li>What are the real consequences for community safety?</li>
                                        <li>Which of my leadership values are most relevant?</li>
                                        <li>How do I want to be remembered for handling this situation?</li>
                                    </ul>
                                </div>
                                
                                <div class="decision-input">
                                    <label class="input-label">What values will guide your decision-making?</label>
                                    <textarea class="decision-textarea" placeholder="Identify the 2-3 most important values for this situation..." oninput="checkCompletion()"></textarea>
                                </div>

                                <div class="decision-input">
                                    <label class="input-label">What are the real stakes beyond immediate pressure?</label>
                                    <textarea class="decision-textarea" placeholder="Consider long-term impacts on relationships, trust, and future capability..." oninput="checkCompletion()"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="decision-phase" id="s1phase3">
                            <div class="phase-header">
                                <div class="phase-title-row">
                                    <h3 class="phase-title">Generate Options Within Values Framework</h3>
                                    <div class="phase-timer" id="s1timer3">90s</div>
                                </div>
                                <p class="phase-description">Brainstorm multiple approaches that honor your values while addressing the situation effectively.</p>
                            </div>
                            <div class="phase-content">
                                <div class="coaching-prompts">
                                    <div class="prompt-title">Creative Problem-Solving</div>
                                    <ul class="prompt-list">
                                        <li>How can I address this situation while maintaining specific values?</li>
                                        <li>What would a leader I admire do in this situation?</li>
                                        <li>What creative approaches honor both urgency and values?</li>
                                    </ul>
                                </div>
                                
                                <div class="decision-input">
                                    <label class="input-label">Technical Response: Investigate breakdown immediately, reassign responsibilities, re-emphasize protocol adherence</label>
                                    <textarea class="decision-textarea" placeholder="How would you implement this approach while maintaining your values?" oninput="checkCompletion()"></textarea>
                                </div>

                                <div class="decision-input">
                                    <label class="input-label">Mixed Approach: Quick debrief to clarify what went wrong, reinforce protocols, ask for staff input on adaptations</label>
                                    <textarea class="decision-textarea" placeholder="How would you balance immediate fixes with team input?" oninput="checkCompletion()"></textarea>
                                </div>

                                <div class="decision-input">
                                    <label class="input-label">Adaptive Response: Use missed delivery as case study to explore deeper system gaps and communication breakdowns</label>
                                    <textarea class="decision-textarea" placeholder="How would you facilitate this learning-focused approach?" oninput="checkCompletion()"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="decision-phase" id="s1phase4">
                            <div class="phase-header">
                                <div class="phase-title-row">
                                    <h3 class="phase-title">Final Decision & Communication</h3>
                                    <div class="phase-timer" id="s1timer4">30s</div>
                                </div>
                                <p class="phase-description">Make your final decision and plan how you'll communicate the values basis for your choice.</p>
                            </div>
                            <div class="phase-content">
                                <div class="coaching-prompts">
                                    <div class="prompt-title">Decision Integration</div>
                                    <ul class="prompt-list">
                                        <li>Which approach best honors your identified values?</li>
                                        <li>How will you explain your reasoning to stakeholders?</li>
                                        <li>What support do you need for effective implementation?</li>
                                    </ul>
                                </div>
                                
                                <div class="decision-input">
                                    <label class="input-label">Your final decision and values-based rationale</label>
                                    <textarea class="decision-textarea" placeholder="State your chosen approach and explain how it honors your core values..." oninput="checkCompletion()"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="phase-controls" id="s1Controls" style="display: none;">
                            <button class="btn btn-secondary" onclick="previousPhase()" id="s1PrevBtn">← Previous</button>
                            <div style="display: flex; gap: 10px;">
                                <button class="btn btn-secondary" onclick="pauseTimer()" id="s1PauseBtn">⏸️ Pause</button>
                                <button class="btn btn-primary" onclick="nextPhase()" id="s1NextBtn" disabled>Continue →</button>
                            </div>
                        </div>

                        <div class="results-panel" id="s1Results">
                            <div class="results-header">
                                <h2 class="results-title">Scenario Complete!</h2>
                                <p class="results-subtitle">Crisis Resource Allocation - Values under pressure</p>
                            </div>

                            <div class="scores-grid">
                                <div class="score-card" id="s1ValuesCard">
                                    <div class="score-value" id="s1ValuesScore">--</div>
                                    <div class="score-label">Values Alignment</div>
                                </div>
                                <div class="score-card" id="s1QualityCard">
                                    <div class="score-value" id="s1QualityScore">--</div>
                                    <div class="score-label">Decision Quality</div>
                                </div>
                                <div class="score-card" id="s1ImpactCard">
                                    <div class="score-value" id="s1ImpactScore">--</div>
                                    <div class="score-label">Stakeholder Impact</div>
                                </div>
                                <div class="score-card" id="s1SystemsCard">
                                    <div class="score-value" id="s1SystemsScore">--</div>
                                    <div class="score-label">Systems Awareness</div>
                                </div>
                            </div>

                            <div class="feedback-section">
                                <h3 class="feedback-title">🎯 Performance Insights</h3>
                                <div class="feedback-content" id="s1Feedback">
                                    Your personalized feedback will appear here...
                                </div>
                            </div>

                            <div style="text-align: center; margin-top: 25px;">
                                <button class="btn btn-secondary" onclick="restartScenario(1)">🔄 Try Again</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Timer Display -->
                <div class="timer-display" id="timerDisplay">
                    <div class="timer-ring" id="timerRing"></div>
                    <div class="timer-value" id="timerValue">15</div>
                    <div class="timer-label">SECONDS</div>
                </div>
            </main>
        </div>
    </div>

    <script>
        let currentTab = 'intro';
        let currentScenario = 0;
        let currentPhase = 0;
        let timerInterval = null;
        let currentTimer = 0;
        let isPaused = false;
        let userResponses = {};
        let scenarioScores = {};
        let coachingInterval = null;

        const scenarios = {
            1: {
                title: "Crisis Resource Allocation",
                phases: [
                    { 
                        time: 15, 
                        prompts: [
                            "What are the real consequences for community safety?",
                            "What physical sensations of stress am I experiencing?", 
                            "Which leadership values are most relevant here?",
                            "Take three deep breaths before responding",
                            "What would my best self do in this situation?"
                        ]
                    },
                    { 
                        time: 60, 
                        prompts: [
                            "What values will guide my decision?", 
                            "What are the real stakes beyond immediate pressure?", 
                            "How do I want to be remembered for this?",
                            "What are the long-term implications of my choice?",
                            "Who are all the stakeholders affected by this decision?"
                        ]
                    },
                    { 
                        time: 90, 
                        prompts: [
                            "How can I address this while maintaining values?", 
                            "What would an exemplary leader do?", 
                            "What creative approaches honor both urgency and ethics?",
                            "What if I had unlimited time - what would I do differently?",
                            "How can I turn this crisis into an opportunity?"
                        ]
                    },
                    { 
                        time: 30, 
                        prompts: [
                            "Which option balances values with effectiveness?", 
                            "How will I communicate my reasoning?", 
                            "What implementation support do I need?",
                            "What would I tell my team about why I chose this approach?",
                            "How does this decision align with my core values?"
                        ]
                    }
                ]
            }
        };

        function showTab(tabName) {
            // Don't allow access to scenarios until intro is completed
            if (tabName !== 'intro' && !document.getElementById('completionIndicator').classList.contains('show')) {
                return;
            }

            // Update tab navigation
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName + 'Tab').classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');

            currentTab = tabName;

            // Hide timer and coaching for intro
            if (tabName === 'intro') {
                document.getElementById('timerDisplay').classList.remove('active');
                document.getElementById('activeCoaching').style.display = 'none';
                clearInterval(coachingInterval);
            }
        }

        function enableScenarios() {
            // Enable all scenario tabs
            document.querySelectorAll('.tab-item.disabled').forEach(tab => {
                tab.classList.remove('disabled');
            });
            
            // Show completion indicator
            document.getElementById('completionIndicator').classList.add('show');
        }

        function startScenarioPhases(scenarioNum) {
            currentScenario = scenarioNum;
            currentPhase = 0;
            userResponses = {};
            
            // Hide intro card and show phases
            document.querySelector(`#scenario${scenarioNum} .scenario-intro-card`).style.display = 'none';
            document.getElementById(`scenario${scenarioNum}Phases`).style.display = 'block';
            document.getElementById(`s${scenarioNum}Controls`).style.display = 'flex';
            document.getElementById('activeCoaching').style.display = 'block';
            
            // Initialize scores for this scenario
            scenarioScores[scenarioNum] = {
                values_alignment: 0,
                decision_quality: 0,
                stakeholder_impact: 0,
                systems_awareness: 0
            };
            
            // Update progress indicator
            updateProgressIndicator(scenarioNum, 0);
            
            updateStatusBar(scenarioNum);
            startPhase(scenarioNum);
        }

        function updateProgressIndicator(scenarioNum, phase) {
            const progressIndicator = document.getElementById('progressIndicator');
            const progressBar = document.getElementById('progressBar');
            
            const totalPhases = scenarios[scenarioNum].phases.length;
            const progress = ((phase + 1) / totalPhases) * 100;
            
            progressIndicator.textContent = `Scenario ${scenarioNum}: Phase ${phase + 1} of ${totalPhases}`;
            progressBar.style.width = progress + '%';
        }

        function startPhase(scenarioNum) {
            const scenario = scenarios[scenarioNum];
            const phase = scenario.phases[currentPhase];
            
            // Hide all phases for this scenario
            document.querySelectorAll(`#scenario${scenarioNum}Phases .decision-phase`).forEach(p => p.classList.remove('active'));
            
            // Show current phase
            const phaseElement = document.getElementById(`s${scenarioNum}phase${currentPhase + 1}`);
            if (phaseElement) {
                phaseElement.classList.add('active');
            }
            
            // Update coaching with rotating prompts
            startCoachingRotation(phase.prompts);
            
            // Update progress
            updateProgressIndicator(scenarioNum, currentPhase);
            
            // Start timer
            startTimer(phase.time, scenarioNum);
            
            // Update pressure
            updatePressure();
            
            // Update controls
            const prevBtn = document.getElementById(`s${scenarioNum}PrevBtn`);
            const nextBtn = document.getElementById(`s${scenarioNum}NextBtn`);
            
            if (prevBtn) prevBtn.disabled = currentPhase === 0;
            if (nextBtn) nextBtn.disabled = true;
        }

        function startCoachingRotation(prompts) {
            clearInterval(coachingInterval);
            let promptIndex = 0;
            
            function updatePrompt() {
                document.getElementById('activePrompt').textContent = prompts[promptIndex];
                promptIndex = (promptIndex + 1) % prompts.length;
            }
            
            updatePrompt(); // Set initial prompt
            coachingInterval = setInterval(updatePrompt, 4000); // Rotate every 4 seconds
        }

        function startTimer(seconds, scenarioNum) {
            currentTimer = seconds;
            const timerDisplay = document.getElementById('timerDisplay');
            const timerValue = document.getElementById('timerValue');
            
            timerDisplay.classList.add('active');
            updateTimerDisplay(scenarioNum);
            
            timerInterval = setInterval(() => {
                if (!isPaused) {
                    currentTimer--;
                    updateTimerDisplay(scenarioNum);
                    
                    if (currentTimer <= 0) {
                        clearInterval(timerInterval);
                        autoAdvancePhase(scenarioNum);
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay(scenarioNum) {
            const timerValue = document.getElementById('timerValue');
            const timerRing = document.getElementById('timerRing');
            const originalTime = scenarios[scenarioNum].phases[currentPhase].time;
            
            timerValue.textContent = Math.max(0, currentTimer);
            
            const progress = ((originalTime - currentTimer) / originalTime) * 100;
            timerRing.style.setProperty('--progress', `${progress}%`);
            
            // Update timer color based on time remaining
            if (currentTimer <= 5) {
                timerValue.style.color = '#e74c3c';
                document.getElementById('timerDisplay').style.borderColor = 'rgba(231, 76, 60, 0.8)';
            } else if (currentTimer <= 10) {
                timerValue.style.color = '#f39c12';
                document.getElementById('timerDisplay').style.borderColor = 'rgba(243, 156, 18, 0.8)';
            } else {
                timerValue.style.color = '#ffffff';
                document.getElementById('timerDisplay').style.borderColor = 'rgba(231, 76, 60, 0.3)';
            }
        }

        function nextPhase() {
            clearInterval(timerInterval);
            clearInterval(coachingInterval);
            document.getElementById('timerDisplay').classList.remove('active');
            
            // Collect responses from current phase
            collectPhaseResponses();
            
            currentPhase++;
            if (currentPhase >= scenarios[currentScenario].phases.length) {
                completeScenario();
            } else {
                startPhase(currentScenario);
            }
        }

        function previousPhase() {
            if (currentPhase > 0) {
                clearInterval(timerInterval);
                clearInterval(coachingInterval);
                document.getElementById('timerDisplay').classList.remove('active');
                currentPhase--;
                startPhase(currentScenario);
            }
        }

        function autoAdvancePhase(scenarioNum) {
            document.getElementById(`s${scenarioNum}NextBtn`).disabled = false;
            // Auto-advance after 2 seconds if user hasn't clicked
            setTimeout(() => {
                if (document.getElementById(`s${scenarioNum}NextBtn`) && !document.getElementById(`s${scenarioNum}NextBtn`).disabled) {
                    nextPhase();
                }
            }, 2000);
        }

        function pauseTimer() {
            isPaused = !isPaused;
            const pauseBtn = document.getElementById(`s${currentScenario}PauseBtn`);
            pauseBtn.textContent = isPaused ? '▶️ Resume' : '⏸️ Pause';
        }

        function collectPhaseResponses() {
            // Get current phase element
            const currentPhaseElement = document.querySelector(`#scenario${currentScenario}Phases .decision-phase.active`);
            if (!currentPhaseElement) return;
            
            // Collect textarea responses
            const textareas = currentPhaseElement.querySelectorAll('textarea');
            const responses = {};
            textareas.forEach((textarea, index) => {
                const label = textarea.previousElementSibling?.textContent || `input_${index}`;
                responses[label] = textarea.value.trim();
            });
            
            // Collect selected values
            const selectedValues = Array.from(currentPhaseElement.querySelectorAll('.values-item.selected'))
                .map(item => item.dataset.value);
            
            const phaseData = {
                phase: currentPhase,
                timeRemaining: currentTimer,
                responses: responses,
                selectedValues: selectedValues,
                totalTime: scenarios[currentScenario].phases[currentPhase].time
            };
            
            userResponses[`phase${currentPhase}`] = phaseData;
            updateScores(phaseData);
        }

        function updateScores(phaseData) {
            if (!scenarioScores[currentScenario]) {
                scenarioScores[currentScenario] = {
                    values_alignment: 0,
                    decision_quality: 0,
                    stakeholder_impact: 0,
                    systems_awareness: 0
                };
            }
            
            // Score based on engagement and timing
            const timeScore = Math.min(1.0, (phaseData.totalTime - phaseData.timeRemaining) / phaseData.totalTime);
            const responses = Object.values(phaseData.responses).filter(r => r.length > 0);
            const responseQuality = responses.reduce((total, response) => {
                return total + Math.min(1.0, response.length / 50);
            }, 0) / Math.max(1, responses.length);
            
            const valuesEngagement = phaseData.selectedValues ? Math.min(1.0, phaseData.selectedValues.length * 0.25) : 0;
            
            // Calculate phase contribution (each phase worth 25 points max)
            const baseScore = Math.round(25 * (responseQuality * 0.6 + timeScore * 0.2 + valuesEngagement * 0.2));
            
            // Add to cumulative scores with some variation
            scenarioScores[currentScenario].values_alignment += Math.round(baseScore * 1.1);
            scenarioScores[currentScenario].decision_quality += Math.round(baseScore * 0.9);
            scenarioScores[currentScenario].stakeholder_impact += Math.round(baseScore * 0.8);
            scenarioScores[currentScenario].systems_awareness += Math.round(baseScore * 0.7);
            
            updateStatusBar(currentScenario);
        }

        function updateStatusBar(scenarioNum) {
            if (scenarioScores[scenarioNum]) {
                document.getElementById('valuesScore').textContent = Math.min(100, scenarioScores[scenarioNum].values_alignment);
                document.getElementById('decisionQuality').textContent = Math.min(100, scenarioScores[scenarioNum].decision_quality);
                document.getElementById('stakeholderImpact').textContent = Math.min(100, scenarioScores[scenarioNum].stakeholder_impact);
                document.getElementById('systemsAwareness').textContent = Math.min(100, scenarioScores[scenarioNum].systems_awareness);
            }
        }

        function updatePressure() {
            const basePressure = (currentPhase + 1) * 20;
            const timePressure = currentTimer < 10 ? 20 : 0;
            const pressureLevel = Math.min(100, basePressure + timePressure + Math.random() * 10);
            document.getElementById('pressureFill').style.width = pressureLevel + '%';
        }

        function toggleValue(element) {
            element.classList.toggle('selected');
            checkCompletion();
        }

        function checkCompletion() {
            // Enable next button based on input
            if (currentScenario === 0) return;
            
            const currentPhaseElement = document.querySelector(`#scenario${currentScenario}Phases .decision-phase.active`);
            if (currentPhaseElement) {
                const textareas = currentPhaseElement.querySelectorAll('textarea');
                const selectedValues = currentPhaseElement.querySelectorAll('.values-item.selected');
                
                // For phase 1 (ground and center), require both text input and values selection
                if (currentPhase === 0) {
                    const hasInput = Array.from(textareas).some(ta => ta.value.trim().length > 10);
                    const hasValues = selectedValues.length > 0;
                    document.getElementById(`s${currentScenario}NextBtn`).disabled = !(hasInput && hasValues);
                } else {
                    // For other phases, just require meaningful text input
                    const hasInput = Array.from(textareas).some(ta => ta.value.trim().length > 20);
                    document.getElementById(`s${currentScenario}NextBtn`).disabled = !hasInput;
                }
            }
        }

        function completeScenario() {
            // Hide phases and show results
            document.getElementById(`scenario${currentScenario}Phases`).style.display = 'none';
            document.getElementById(`s${currentScenario}Controls`).style.display = 'none';
            document.getElementById('timerDisplay').classList.remove('active');
            clearInterval(coachingInterval);
            
            // Show results
            document.getElementById(`s${currentScenario}Results`).classList.add('show');
            
            // Update final scores
            updateFinalScoreDisplay(currentScenario);
            generateFeedback(currentScenario);
        }

        function updateFinalScoreDisplay(scenarioNum) {
            const scores = scenarioScores[scenarioNum];
            document.getElementById(`s${scenarioNum}ValuesScore`).textContent = Math.round(scores.values_alignment);
            document.getElementById(`s${scenarioNum}QualityScore`).textContent = Math.round(scores.decision_quality);
            document.getElementById(`s${scenarioNum}ImpactScore`).textContent = Math.round(scores.stakeholder_impact);
            document.getElementById(`s${scenarioNum}SystemsScore`).textContent = Math.round(scores.systems_awareness);
            
            // Add score styling
            updateScoreCardStyling(scenarioNum, 'Values', scores.values_alignment);
            updateScoreCardStyling(scenarioNum, 'Quality', scores.decision_quality);
            updateScoreCardStyling(scenarioNum, 'Impact', scores.stakeholder_impact);
            updateScoreCardStyling(scenarioNum, 'Systems', scores.systems_awareness);
        }

        function updateScoreCardStyling(scenarioNum, type, score) {
            const card = document.getElementById(`s${scenarioNum}${type}Card`);
            card.classList.remove('score-excellent', 'score-good', 'score-needs-improvement');
            
            if (score >= 80) {
                card.classList.add('score-excellent');
            } else if (score >= 65) {
                card.classList.add('score-good');
            } else {
                card.classList.add('score-needs-improvement');
            }
        }

        function generateFeedback(scenarioNum) {
            const scores = scenarioScores[scenarioNum];
            const avgScore = (scores.values_alignment + scores.decision_quality + scores.stakeholder_impact + scores.systems_awareness) / 4;
            
            let feedback = `You completed this high-pressure scenario with ${Math.round(avgScore)}% overall effectiveness. `;
            
            if (avgScore >= 80) {
                feedback += "Excellent values-based leadership under pressure! You maintained strong ethical alignment while making quality decisions. Your ability to stay grounded and consider multiple perspectives even under time constraints shows exceptional leadership maturity.";
            } else if (avgScore >= 65) {
                feedback += "Strong performance with room for growth. You demonstrated good values awareness and decision-making capability. To improve further, focus on maintaining systems thinking during the most intense pressure moments, and consider practicing values clarification techniques.";
            } else {
                feedback += "This scenario highlighted valuable areas for development. Consider practicing the grounding techniques more frequently, and try to slow down your thinking process even when time feels short. Remember that taking an extra moment to center yourself often leads to better long-term outcomes.";
            }
            
            // Add specific insights
            if (scores.values_alignment > scores.systems_awareness + 15) {
                feedback += " Your values alignment was particularly strong - you have a clear ethical compass that guides your decisions well.";
            }
            if (scores.systems_awareness < 60) {
                feedback += " Focus on expanding your systems thinking - consider how decisions ripple through the organization and impact future capabilities.";
            }
            
            document.getElementById(`s${scenarioNum}Feedback`).textContent = feedback;
        }

        function restartScenario(scenarioNum) {
            // Reset scenario state
            currentPhase = 0;
            userResponses = {};
            clearInterval(timerInterval);
            clearInterval(coachingInterval);
            
            // Reset UI
            document.querySelector(`#scenario${scenarioNum} .scenario-intro-card`).style.display = 'block';
            document.getElementById(`scenario${scenarioNum}Phases`).style.display = 'none';
            document.getElementById(`s${scenarioNum}Controls`).style.display = 'none';
            document.getElementById(`s${scenarioNum}Results`).classList.remove('show');
            document.getElementById('timerDisplay').classList.remove('active');
            document.getElementById('activeCoaching').style.display = 'none';
            
            // Clear form inputs
            document.querySelectorAll(`#scenario${scenarioNum} textarea`).forEach(ta => ta.value = '');
            document.querySelectorAll(`#scenario${scenarioNum} .values-item`).forEach(item => item.classList.remove('selected'));
            
            // Reset scores
            scenarioScores[scenarioNum] = {
                values_alignment: 0,
                decision_quality: 0,
                stakeholder_impact: 0,
                systems_awareness: 0
            };
            
            // Reset status bar
            document.getElementById('valuesScore').textContent = '--';
            document.getElementById('decisionQuality').textContent = '--';
            document.getElementById('stakeholderImpact').textContent = '--';
            document.getElementById('systemsAwareness').textContent = '--';
            document.getElementById('pressureFill').style.width = '0%';
            
            // Reset progress
            document.getElementById('progressIndicator').textContent = "Ready to begin scenarios";
            document.getElementById('progressBar').style.width = '0%';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updatePressure();
            
            // Add input event listeners to all textareas
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('decision-textarea')) {
                    checkCompletion();
                }
            });
            
            // Initialize progress
            const progressIndicator = document.getElementById('progressIndicator');
            const progressBar = document.getElementById('progressBar');
            if (progressIndicator) {
                progressIndicator.textContent = "Ready to begin scenarios";
            }
            if (progressBar) {
                progressBar.style.width = '0%';
            }
        });
    </script>
</body>
</html>
